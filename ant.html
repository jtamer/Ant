<html>
    <body>
        <canvas id="antCanvas" width = "1400" height="1200" 
        style="border:1px solid #000000;"> 
        </canvas>
<script>
    var BLACK = "#000000";
    var WHITE = "#ffffff";

    var RECTANGULAR = Math.PI / 2;
    var HEXAGONAL = Math.PI / 3;
    var GRID_TYPE = HEXAGONAL;

    var rainbowColor = Math.random() * 255 * 6;
    var antCanvas=document.getElementById("antCanvas");
    var blkSize = 3;
    var canvasSize = [antCanvas.width, antCanvas.height];
    var curPos = [canvasSize[0] / 2, 2 * canvasSize[1] / 3];
    var curDir = 0;
    var ctx = antCanvas.getContext("2d");

    function colorHex(x) {
        var s = x.toString(16);
        return (s.length < 2) ? ('0'+s) : s;
    }

    function getRainbowColor() {
        rainbowColor += 0.1;
        var rc = Math.floor(rainbowColor) % (255 * 6);
        if (rc < 255) {
            return '#' + colorHex(rc) + '00ff';
        }
        rc -= 255;
        if (rc < 255) {
            return '#ff00' + colorHex(255 - rc);
        }
        rc -= 255;
        if (rc < 255) {
            return '#ff' + colorHex(rc) + '00';
        }
        rc -= 255;
        if (rc < 255) {
            return '#' + colorHex(255 - rc) + 'ff00';
        }
        rc -= 255;
        if (rc < 255) {
            return '#00ff' + colorHex(rc);
        }
        rc -= 255;
        if (rc < 255) {
            return '#00' + colorHex(255 - rc) + 'ff';
        }
    }

    function fillCircle(color) {
      ctx.beginPath();
      ctx.arc(curPos[0], curPos[1], blkSize, 0, 2 * Math.PI, false);
      ctx.fillStyle = color;
      ctx.fill();
      ctx.lineWidth = 1;
      ctx.strokeStyle = color;
      ctx.stroke();
    }

    function getCurColor(){
        var color = ctx.getImageData(curPos[0], curPos[1], 1, 1).data;
        return '#' + colorHex(color[0]) + colorHex(color[1]) + colorHex(color[2]);
    }

    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function runAnt() {
        ctx.fillStyle = BLACK;
        ctx.fillRect(0, 0, antCanvas.width, antCanvas.height);
        var steps = 0;
        while (curPos[0] >= 0 && curPos[1] >= 0
                && curPos[0] < canvasSize[0] && curPos[1] < canvasSize[1]) {
            var curColor = getCurColor()
            if (curColor != BLACK){
                curColor = BLACK;
                fillCircle(BLACK);
                curDir += GRID_TYPE;
                curPos[0] += Math.cos(curDir) * blkSize * 2.1;
                curPos[1] += Math.sin(curDir) * blkSize * 2.1;
            } else {
                curColor = WHITE;
                var rainbowColor = getRainbowColor();
                fillCircle(rainbowColor);
                curDir -= GRID_TYPE;
                curPos[0] += Math.cos(curDir) * blkSize * 2.1;
                curPos[1] += Math.sin(curDir) * blkSize * 2.1;
            }
            ++steps;
            if (steps % 10 == 0) {
                await sleep(1);
            }
        }       
    }
    runAnt();
</script>
    </body>
</html>

